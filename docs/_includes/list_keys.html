<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/PyMonitorMQTT/css/config_list.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Gentium+Basic&display=swap" rel="stylesheet">
</head>

{% assign nested_left_margin = "40" %}

{% assign defaults = site.data.sensors.default_options %}

{% for entry in include.config %}

    {% if entry.type %}
    {% assign type = entry.type %}
    {% elsif defaults[entry.key] %}
    {% assign type = defaults[entry.key].type %}
    {% endif %}

    {% if entry.description %}
    {% assign description = entry.description %}
    {% elsif defaults[entry.key] %}
    {% assign description = defaults[entry.key].description %}
    {% endif %}

    {% if entry.required == true %}
    {% assign required_class = "required-string" %}
    {% assign required_text = "required" %}
    {% else %}
    {% assign required_class = "optional-string" %}
    {% assign required_text = "optional" %}
    {% endif %}


    {% if entry.default %}
    {% assign default = '<span class="default-string">default: ' | append: entry.default | append: '</span>' %}
    {% elsif defaults[entry.key] %}
        {% if defaults[entry.key].default %}
        {% assign default = '<span class="default-string">default: ' | append: defaults[entry.key].default | append: '</span>' %}
        {% else %}
        {% assign default = defaults[entry.key] %}
        {% endif %}
    {% else %}
    {% assign default = "Ahia!" %}
    {% endif %}

    {% if entry.level %}
    {% assign level-margin = entry.level | minus: 1 | times: nested_left_margin %}
    <div class="key-list-item" style="margin-left: {{level-margin}}px;">
    {% else %}
    <div class="key-list-item">
    {% endif %}
    

    <div class="key-list-item-header">
        <span class="key">{{entry.key}}</span>
        <span class="{{required_class}}">{{required_text}}</span>
        {{default}}
    </div>
    <div class="key-lower-div">
        
    <span class="type">{{type}}</span>

{{description}}
    </div>

</div>

{% endfor %}

</html>
